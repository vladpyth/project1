{"ast":null,"code":"var _jsxFileName = \"D:\\\\3_\\u043A\\u0443\\u0440\\u0441\\\\\\u0421\\u0422\\u0420\\u0421\\\\lab7\\\\filmbase-frontend\\\\src\\\\components\\\\Products.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Container, Grid, Card, CardContent, CardMedia, Typography, Button, TextField, Box, Alert, Chip, IconButton, Dialog, DialogTitle, DialogContent, DialogActions, FormControl, InputLabel, Select, MenuItem, Paper } from '@mui/material';\nimport SearchIcon from '@mui/icons-material/Search';\nimport AddShoppingCartIcon from '@mui/icons-material/AddShoppingCart';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport StoreIcon from '@mui/icons-material/Store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Products = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [userRole, setUserRole] = useState('NULL');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [imageErrors, setImageErrors] = useState({});\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [editForm, setEditForm] = useState({\n    name: '',\n    description: '',\n    price: '',\n    imageUrl: '',\n    categoryId: '',\n    stockQuantity: ''\n  });\n  const navigate = useNavigate();\n  const handleImageError = productId => {\n    setImageErrors(prev => ({\n      ...prev,\n      [productId]: true\n    }));\n  };\n  const getImageUrl = product => {\n    if (imageErrors[product.id]) {\n      return 'https://via.placeholder.com/300x250?text=Ошибка+загрузки';\n    }\n    if (!product.imageUrl || product.imageUrl.trim() === '') {\n      return 'https://via.placeholder.com/300x250?text=Нет+изображения';\n    }\n    return product.imageUrl;\n  };\n  useEffect(() => {\n    checkUser();\n    fetchCategories();\n    fetchProducts();\n  }, []);\n  useEffect(() => {\n    filterProducts();\n  }, [searchTerm, selectedCategory, products]);\n  const checkUser = async () => {\n    try {\n      const response = await fetch('http://localhost:8080/api/current-user');\n      const role = await response.text();\n      setUserRole(role);\n    } catch (error) {\n      console.error('Ошибка при проверке пользователя:', error);\n    }\n  };\n  const fetchCategories = async () => {\n    try {\n      const response = await fetch('http://localhost:8080/api/categories');\n      const data = await response.json();\n      setCategories(data);\n    } catch (err) {\n      console.error('Ошибка загрузки категорий:', err);\n    }\n  };\n  const fetchProducts = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch('http://localhost:8080/api/products');\n      if (!response.ok) throw new Error('Ошибка загрузки товаров');\n      const data = await response.json();\n      setProducts(data);\n      setFilteredProducts(data);\n    } catch (err) {\n      setError('Не удалось загрузить товары');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const filterProducts = () => {\n    let filtered = [...products];\n    if (selectedCategory !== 'all') {\n      filtered = filtered.filter(p => p.category && p.category.id === parseInt(selectedCategory));\n    }\n    if (searchTerm.trim() !== '') {\n      filtered = filtered.filter(p => p.name.toLowerCase().includes(searchTerm.toLowerCase()) || p.description && p.description.toLowerCase().includes(searchTerm.toLowerCase()));\n    }\n    setFilteredProducts(filtered);\n  };\n  const handleSearch = async () => {\n    if (searchTerm.trim() === '') {\n      filterProducts();\n      return;\n    }\n    try {\n      const response = await fetch('http://localhost:8080/api/products/search', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: searchTerm\n        })\n      });\n      const data = await response.json();\n      setFilteredProducts(data);\n    } catch (err) {\n      setError('Ошибка поиска');\n    }\n  };\n  const handleAddToCart = async (product, quantity = 1) => {\n    if (userRole === 'NULL') {\n      navigate('/login');\n      return;\n    }\n    if (product.stockQuantity < quantity) {\n      setError(`Недостаточно товара на складе. Доступно: ${product.stockQuantity} шт.`);\n      return;\n    }\n    try {\n      const response = await fetch('http://localhost:8080/api/cart/add', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          productId: product.id,\n          quantity\n        })\n      });\n      const result = await response.text();\n      if (result === 'GOOD') {\n        setSuccess(`Товар \"${product.name}\" добавлен в корзину`);\n        setTimeout(() => setSuccess(''), 3000);\n      } else if (result === 'ERRORAUTH') {\n        setError('Необходимо войти в систему');\n      } else if (result === 'ERRORSTOCK') {\n        setError('Недостаточно товара на складе');\n      } else {\n        setError('Ошибка добавления товара в корзину');\n      }\n    } catch (err) {\n      setError('Ошибка добавления товара в корзину');\n    }\n  };\n  const handleEditClick = product => {\n    setSelectedProduct(product);\n    setEditForm({\n      name: product.name,\n      description: product.description || '',\n      price: product.price,\n      imageUrl: product.imageUrl || '',\n      categoryId: product.category ? product.category.id : '',\n      stockQuantity: product.stockQuantity\n    });\n    setEditDialogOpen(true);\n  };\n  const handleEditSubmit = async () => {\n    try {\n      const category = categories.find(c => c.id === parseInt(editForm.categoryId));\n      const productData = {\n        id: selectedProduct.id,\n        name: editForm.name,\n        description: editForm.description,\n        price: parseFloat(editForm.price),\n        imageUrl: editForm.imageUrl,\n        category: category,\n        stockQuantity: parseInt(editForm.stockQuantity)\n      };\n      const response = await fetch('http://localhost:8080/api/products/edit', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(productData)\n      });\n      const result = await response.text();\n      if (result.startsWith('1.')) {\n        setSuccess(result);\n        setEditDialogOpen(false);\n        fetchProducts();\n      } else {\n        setError(result);\n      }\n    } catch (err) {\n      setError('Ошибка редактирования товара');\n    }\n  };\n  const handleDelete = async product => {\n    if (!window.confirm(`Удалить товар \"${product.name}\"?`)) {\n      return;\n    }\n    try {\n      const response = await fetch('http://localhost:8080/api/products/delete', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: product.id\n        })\n      });\n      const result = await response.text();\n      if (result.startsWith('1.')) {\n        setSuccess(result);\n        fetchProducts();\n      } else {\n        setError(result);\n      }\n    } catch (err) {\n      setError('Ошибка удаления товара');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      sx: {\n        textAlign: 'center',\n        mt: 10\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"xl\",\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        gutterBottom: true,\n        children: \"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 2\n        },\n        onClose: () => setError(''),\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        sx: {\n          mb: 2\n        },\n        onClose: () => setSuccess(''),\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 1,\n        sx: {\n          p: 2,\n          mb: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 4,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              fullWidth: true,\n              children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                value: selectedCategory,\n                label: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\",\n                onChange: e => setSelectedCategory(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"all\",\n                  children: \"\\u0412\\u0441\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 19\n                }, this), categories.map(cat => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: cat.id.toString(),\n                  children: cat.name\n                }, cat.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 8,\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                gap: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                variant: \"outlined\",\n                placeholder: \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u044E \\u0438\\u043B\\u0438 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u044E...\",\n                value: searchTerm,\n                onChange: e => setSearchTerm(e.target.value),\n                onKeyPress: e => e.key === 'Enter' && handleSearch(),\n                InputProps: {\n                  startAdornment: /*#__PURE__*/_jsxDEV(SearchIcon, {\n                    sx: {\n                      mr: 1,\n                      color: 'action.active'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 296,\n                    columnNumber: 37\n                  }, this)\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                onClick: handleSearch,\n                startIcon: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 30\n                }, this),\n                children: \"\\u041F\\u043E\\u0438\\u0441\\u043A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      children: filteredProducts.map(product => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        md: 4,\n        lg: 3,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n            component: \"img\",\n            height: \"250\",\n            image: getImageUrl(product),\n            alt: product.name,\n            sx: {\n              objectFit: 'cover',\n              bgcolor: 'grey.200'\n            },\n            onError: () => handleImageError(product.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            sx: {\n              flexGrow: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'start',\n                mb: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                component: \"h3\",\n                sx: {\n                  flex: 1\n                },\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 19\n              }, this), userRole === 'ADMIN' && /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                  size: \"small\",\n                  onClick: () => handleEditClick(product),\n                  color: \"primary\",\n                  children: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                  size: \"small\",\n                  onClick: () => handleDelete(product),\n                  color: \"error\",\n                  children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this), product.category && /*#__PURE__*/_jsxDEV(Chip, {\n              label: product.category.name,\n              size: \"small\",\n              sx: {\n                mb: 1\n              },\n              color: \"primary\",\n              variant: \"outlined\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              color: \"primary\",\n              paragraph: true,\n              children: [product.price.toFixed(2), \" \\u20BD\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"text.secondary\",\n              paragraph: true,\n              sx: {\n                display: '-webkit-box',\n                WebkitLineClamp: 3,\n                WebkitBoxOrient: 'vertical',\n                overflow: 'hidden',\n                mb: 1\n              },\n              children: product.description || 'Нет описания'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: product.stockQuantity > 0 ? 'success.main' : 'error.main',\n              sx: {\n                mb: 2\n              },\n              children: product.stockQuantity > 0 ? `В наличии: ${product.stockQuantity} шт.` : 'Нет в наличии'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              fullWidth: true,\n              startIcon: /*#__PURE__*/_jsxDEV(AddShoppingCartIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 30\n              }, this),\n              onClick: () => handleAddToCart(product),\n              disabled: product.stockQuantity === 0 || userRole === 'NULL',\n              children: product.stockQuantity === 0 ? 'Нет в наличии' : userRole === 'NULL' ? 'Войдите для покупки' : 'В корзину'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 13\n        }, this)\n      }, product.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this), filteredProducts.length === 0 && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        textAlign: 'center',\n        mt: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(StoreIcon, {\n        sx: {\n          fontSize: 60,\n          color: 'text.secondary',\n          mb: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        color: \"text.secondary\",\n        children: \"\\u0422\\u043E\\u0432\\u0430\\u0440\\u044B \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: editDialogOpen,\n      onClose: () => setEditDialogOpen(false),\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          sx: {\n            mt: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              label: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\",\n              value: editForm.name,\n              onChange: e => setEditForm({\n                ...editForm,\n                name: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              label: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\",\n              multiline: true,\n              rows: 4,\n              value: editForm.description,\n              onChange: e => setEditForm({\n                ...editForm,\n                description: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              label: \"\\u0426\\u0435\\u043D\\u0430\",\n              type: \"number\",\n              value: editForm.price,\n              onChange: e => setEditForm({\n                ...editForm,\n                price: e.target.value\n              }),\n              inputProps: {\n                step: \"0.01\",\n                min: \"0\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              label: \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043D\\u0430 \\u0441\\u043A\\u043B\\u0430\\u0434\\u0435\",\n              type: \"number\",\n              value: editForm.stockQuantity,\n              onChange: e => setEditForm({\n                ...editForm,\n                stockQuantity: e.target.value\n              }),\n              inputProps: {\n                min: \"0\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              label: \"URL \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\",\n              value: editForm.imageUrl,\n              onChange: e => setEditForm({\n                ...editForm,\n                imageUrl: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            md: 6,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              fullWidth: true,\n              children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                value: editForm.categoryId,\n                label: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\",\n                onChange: e => setEditForm({\n                  ...editForm,\n                  categoryId: e.target.value\n                }),\n                children: categories.map(cat => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: cat.id.toString(),\n                  children: cat.name\n                }, cat.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setEditDialogOpen(false),\n          children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleEditSubmit,\n          variant: \"contained\",\n          children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 5\n  }, this);\n};\n_s(Products, \"nwynVtxzIXmozH5Xy6jJG+V6RV8=\", false, function () {\n  return [useNavigate];\n});\n_c = Products;\nexport default Products;\nvar _c;\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Container","Grid","Card","CardContent","CardMedia","Typography","Button","TextField","Box","Alert","Chip","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","FormControl","InputLabel","Select","MenuItem","Paper","SearchIcon","AddShoppingCartIcon","EditIcon","DeleteIcon","StoreIcon","jsxDEV","_jsxDEV","Products","_s","products","setProducts","filteredProducts","setFilteredProducts","categories","setCategories","userRole","setUserRole","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","loading","setLoading","error","setError","success","setSuccess","imageErrors","setImageErrors","editDialogOpen","setEditDialogOpen","selectedProduct","setSelectedProduct","editForm","setEditForm","name","description","price","imageUrl","categoryId","stockQuantity","navigate","handleImageError","productId","prev","getImageUrl","product","id","trim","checkUser","fetchCategories","fetchProducts","filterProducts","response","fetch","role","text","console","data","json","err","ok","Error","filtered","filter","p","category","parseInt","toLowerCase","includes","handleSearch","method","headers","body","JSON","stringify","handleAddToCart","quantity","result","setTimeout","handleEditClick","handleEditSubmit","find","c","productData","parseFloat","startsWith","handleDelete","window","confirm","sx","textAlign","mt","children","variant","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","mb","component","gutterBottom","severity","onClose","elevation","container","spacing","alignItems","item","xs","md","fullWidth","value","label","onChange","e","target","map","cat","toString","display","gap","placeholder","onKeyPress","key","InputProps","startAdornment","mr","color","onClick","startIcon","sm","lg","height","flexDirection","image","alt","objectFit","bgcolor","onError","flexGrow","justifyContent","flex","size","paragraph","toFixed","WebkitLineClamp","WebkitBoxOrient","overflow","disabled","length","fontSize","open","multiline","rows","type","inputProps","step","min","_c","$RefreshReg$"],"sources":["D:/3_курс/СТРС/lab7/filmbase-frontend/src/components/Products.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Container, Grid, Card, CardContent, CardMedia,\n  Typography, Button, TextField, Box,\n  Alert, Chip, IconButton, Dialog, DialogTitle,\n  DialogContent, DialogActions, FormControl, InputLabel,\n  Select, MenuItem, Paper\n} from '@mui/material';\nimport SearchIcon from '@mui/icons-material/Search';\nimport AddShoppingCartIcon from '@mui/icons-material/AddShoppingCart';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport StoreIcon from '@mui/icons-material/Store';\n\nconst Products = () => {\n  const [products, setProducts] = useState([]);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [userRole, setUserRole] = useState('NULL');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [imageErrors, setImageErrors] = useState({});\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [editForm, setEditForm] = useState({\n    name: '',\n    description: '',\n    price: '',\n    imageUrl: '',\n    categoryId: '',\n    stockQuantity: ''\n  });\n  const navigate = useNavigate();\n\n  const handleImageError = (productId) => {\n    setImageErrors(prev => ({ ...prev, [productId]: true }));\n  };\n\n  const getImageUrl = (product) => {\n    if (imageErrors[product.id]) {\n      return 'https://via.placeholder.com/300x250?text=Ошибка+загрузки';\n    }\n    if (!product.imageUrl || product.imageUrl.trim() === '') {\n      return 'https://via.placeholder.com/300x250?text=Нет+изображения';\n    }\n    return product.imageUrl;\n  };\n\n  useEffect(() => {\n    checkUser();\n    fetchCategories();\n    fetchProducts();\n  }, []);\n\n  useEffect(() => {\n    filterProducts();\n  }, [searchTerm, selectedCategory, products]);\n\n  const checkUser = async () => {\n    try {\n      const response = await fetch('http://localhost:8080/api/current-user');\n      const role = await response.text();\n      setUserRole(role);\n    } catch (error) {\n      console.error('Ошибка при проверке пользователя:', error);\n    }\n  };\n\n  const fetchCategories = async () => {\n    try {\n      const response = await fetch('http://localhost:8080/api/categories');\n      const data = await response.json();\n      setCategories(data);\n    } catch (err) {\n      console.error('Ошибка загрузки категорий:', err);\n    }\n  };\n\n  const fetchProducts = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch('http://localhost:8080/api/products');\n      if (!response.ok) throw new Error('Ошибка загрузки товаров');\n      \n      const data = await response.json();\n      setProducts(data);\n      setFilteredProducts(data);\n    } catch (err) {\n      setError('Не удалось загрузить товары');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filterProducts = () => {\n    let filtered = [...products];\n\n    if (selectedCategory !== 'all') {\n      filtered = filtered.filter(p => p.category && p.category.id === parseInt(selectedCategory));\n    }\n\n    if (searchTerm.trim() !== '') {\n      filtered = filtered.filter(p =>\n        p.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        (p.description && p.description.toLowerCase().includes(searchTerm.toLowerCase()))\n      );\n    }\n\n    setFilteredProducts(filtered);\n  };\n\n  const handleSearch = async () => {\n    if (searchTerm.trim() === '') {\n      filterProducts();\n      return;\n    }\n    \n    try {\n      const response = await fetch('http://localhost:8080/api/products/search', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name: searchTerm })\n      });\n      \n      const data = await response.json();\n      setFilteredProducts(data);\n    } catch (err) {\n      setError('Ошибка поиска');\n    }\n  };\n\n  const handleAddToCart = async (product, quantity = 1) => {\n    if (userRole === 'NULL') {\n      navigate('/login');\n      return;\n    }\n\n    if (product.stockQuantity < quantity) {\n      setError(`Недостаточно товара на складе. Доступно: ${product.stockQuantity} шт.`);\n      return;\n    }\n    \n    try {\n      const response = await fetch('http://localhost:8080/api/cart/add', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ productId: product.id, quantity })\n      });\n      \n      const result = await response.text();\n      if (result === 'GOOD') {\n        setSuccess(`Товар \"${product.name}\" добавлен в корзину`);\n        setTimeout(() => setSuccess(''), 3000);\n      } else if (result === 'ERRORAUTH') {\n        setError('Необходимо войти в систему');\n      } else if (result === 'ERRORSTOCK') {\n        setError('Недостаточно товара на складе');\n      } else {\n        setError('Ошибка добавления товара в корзину');\n      }\n    } catch (err) {\n      setError('Ошибка добавления товара в корзину');\n    }\n  };\n\n  const handleEditClick = (product) => {\n    setSelectedProduct(product);\n    setEditForm({\n      name: product.name,\n      description: product.description || '',\n      price: product.price,\n      imageUrl: product.imageUrl || '',\n      categoryId: product.category ? product.category.id : '',\n      stockQuantity: product.stockQuantity\n    });\n    setEditDialogOpen(true);\n  };\n\n  const handleEditSubmit = async () => {\n    try {\n      const category = categories.find(c => c.id === parseInt(editForm.categoryId));\n      const productData = {\n        id: selectedProduct.id,\n        name: editForm.name,\n        description: editForm.description,\n        price: parseFloat(editForm.price),\n        imageUrl: editForm.imageUrl,\n        category: category,\n        stockQuantity: parseInt(editForm.stockQuantity)\n      };\n      \n      const response = await fetch('http://localhost:8080/api/products/edit', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(productData)\n      });\n      \n      const result = await response.text();\n      if (result.startsWith('1.')) {\n        setSuccess(result);\n        setEditDialogOpen(false);\n        fetchProducts();\n      } else {\n        setError(result);\n      }\n    } catch (err) {\n      setError('Ошибка редактирования товара');\n    }\n  };\n\n  const handleDelete = async (product) => {\n    if (!window.confirm(`Удалить товар \"${product.name}\"?`)) {\n      return;\n    }\n    \n    try {\n      const response = await fetch('http://localhost:8080/api/products/delete', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ id: product.id })\n      });\n      \n      const result = await response.text();\n      if (result.startsWith('1.')) {\n        setSuccess(result);\n        fetchProducts();\n      } else {\n        setError(result);\n      }\n    } catch (err) {\n      setError('Ошибка удаления товара');\n    }\n  };\n\n  if (loading) {\n    return (\n      <Container sx={{ textAlign: 'center', mt: 10 }}>\n        <Typography variant=\"h6\">Загрузка товаров...</Typography>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"xl\">\n      <Box sx={{ mb: 4 }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n          Каталог товаров\n        </Typography>\n        \n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => setError('')}>\n            {error}\n          </Alert>\n        )}\n        \n        {success && (\n          <Alert severity=\"success\" sx={{ mb: 2 }} onClose={() => setSuccess('')}>\n            {success}\n          </Alert>\n        )}\n        \n        {/* Фильтры и поиск */}\n        <Paper elevation={1} sx={{ p: 2, mb: 3 }}>\n          <Grid container spacing={2} alignItems=\"center\">\n            <Grid item xs={12} md={4}>\n              <FormControl fullWidth>\n                <InputLabel>Категория</InputLabel>\n                <Select\n                  value={selectedCategory}\n                  label=\"Категория\"\n                  onChange={(e) => setSelectedCategory(e.target.value)}\n                >\n                  <MenuItem value=\"all\">Все категории</MenuItem>\n                  {categories.map((cat) => (\n                    <MenuItem key={cat.id} value={cat.id.toString()}>\n                      {cat.name}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n            <Grid item xs={12} md={8}>\n              <Box sx={{ display: 'flex', gap: 2 }}>\n                <TextField\n                  fullWidth\n                  variant=\"outlined\"\n                  placeholder=\"Поиск по названию или описанию...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\n                  InputProps={{\n                    startAdornment: <SearchIcon sx={{ mr: 1, color: 'action.active' }} />\n                  }}\n                />\n                <Button\n                  variant=\"contained\"\n                  onClick={handleSearch}\n                  startIcon={<SearchIcon />}\n                >\n                  Поиск\n                </Button>\n              </Box>\n            </Grid>\n          </Grid>\n        </Paper>\n      </Box>\n\n      {/* Сетка товаров */}\n      <Grid container spacing={3}>\n        {filteredProducts.map((product) => (\n          <Grid item xs={12} sm={6} md={4} lg={3} key={product.id}>\n            <Card sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n              <CardMedia\n                component=\"img\"\n                height=\"250\"\n                image={getImageUrl(product)}\n                alt={product.name}\n                sx={{ objectFit: 'cover', bgcolor: 'grey.200' }}\n                onError={() => handleImageError(product.id)}\n              />\n              <CardContent sx={{ flexGrow: 1 }}>\n                <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start', mb: 1 }}>\n                  <Typography variant=\"h6\" component=\"h3\" sx={{ flex: 1 }}>\n                    {product.name}\n                  </Typography>\n                  {userRole === 'ADMIN' && (\n                    <Box>\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => handleEditClick(product)}\n                        color=\"primary\"\n                      >\n                        <EditIcon />\n                      </IconButton>\n                      <IconButton\n                        size=\"small\"\n                        onClick={() => handleDelete(product)}\n                        color=\"error\"\n                      >\n                        <DeleteIcon />\n                      </IconButton>\n                    </Box>\n                  )}\n                </Box>\n                \n                {product.category && (\n                  <Chip\n                    label={product.category.name}\n                    size=\"small\"\n                    sx={{ mb: 1 }}\n                    color=\"primary\"\n                    variant=\"outlined\"\n                  />\n                )}\n                \n                <Typography variant=\"h6\" color=\"primary\" paragraph>\n                  {product.price.toFixed(2)} ₽\n                </Typography>\n                \n                <Typography variant=\"body2\" color=\"text.secondary\" paragraph sx={{ \n                  display: '-webkit-box',\n                  WebkitLineClamp: 3,\n                  WebkitBoxOrient: 'vertical',\n                  overflow: 'hidden',\n                  mb: 1\n                }}>\n                  {product.description || 'Нет описания'}\n                </Typography>\n                \n                <Typography variant=\"body2\" color={product.stockQuantity > 0 ? 'success.main' : 'error.main'} sx={{ mb: 2 }}>\n                  {product.stockQuantity > 0 \n                    ? `В наличии: ${product.stockQuantity} шт.`\n                    : 'Нет в наличии'}\n                </Typography>\n                \n                <Button\n                  variant=\"contained\"\n                  fullWidth\n                  startIcon={<AddShoppingCartIcon />}\n                  onClick={() => handleAddToCart(product)}\n                  disabled={product.stockQuantity === 0 || userRole === 'NULL'}\n                >\n                  {product.stockQuantity === 0 \n                    ? 'Нет в наличии'\n                    : userRole === 'NULL'\n                    ? 'Войдите для покупки'\n                    : 'В корзину'}\n                </Button>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      {filteredProducts.length === 0 && (\n        <Box sx={{ textAlign: 'center', mt: 10 }}>\n          <StoreIcon sx={{ fontSize: 60, color: 'text.secondary', mb: 2 }} />\n          <Typography variant=\"h6\" color=\"text.secondary\">\n            Товары не найдены\n          </Typography>\n        </Box>\n      )}\n\n      {/* Диалог редактирования */}\n      <Dialog open={editDialogOpen} onClose={() => setEditDialogOpen(false)} maxWidth=\"md\" fullWidth>\n        <DialogTitle>Редактирование товара</DialogTitle>\n        <DialogContent>\n          <Grid container spacing={2} sx={{ mt: 1 }}>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"Название товара\"\n                value={editForm.name}\n                onChange={(e) => setEditForm({ ...editForm, name: e.target.value })}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                label=\"Описание\"\n                multiline\n                rows={4}\n                value={editForm.description}\n                onChange={(e) => setEditForm({ ...editForm, description: e.target.value })}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Цена\"\n                type=\"number\"\n                value={editForm.price}\n                onChange={(e) => setEditForm({ ...editForm, price: e.target.value })}\n                inputProps={{ step: \"0.01\", min: \"0\" }}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"Количество на складе\"\n                type=\"number\"\n                value={editForm.stockQuantity}\n                onChange={(e) => setEditForm({ ...editForm, stockQuantity: e.target.value })}\n                inputProps={{ min: \"0\" }}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <TextField\n                fullWidth\n                label=\"URL изображения\"\n                value={editForm.imageUrl}\n                onChange={(e) => setEditForm({ ...editForm, imageUrl: e.target.value })}\n              />\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <FormControl fullWidth>\n                <InputLabel>Категория</InputLabel>\n                <Select\n                  value={editForm.categoryId}\n                  label=\"Категория\"\n                  onChange={(e) => setEditForm({ ...editForm, categoryId: e.target.value })}\n                >\n                  {categories.map((cat) => (\n                    <MenuItem key={cat.id} value={cat.id.toString()}>\n                      {cat.name}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n          </Grid>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setEditDialogOpen(false)}>Отмена</Button>\n          <Button onClick={handleEditSubmit} variant=\"contained\">Сохранить</Button>\n        </DialogActions>\n      </Dialog>\n    </Container>\n  );\n};\n\nexport default Products;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}